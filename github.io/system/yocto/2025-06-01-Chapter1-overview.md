# Chater 1. Yocto의 소개와 추상화 개념

#### 요약

> Yocto는 커스텀 리눅스 배포를 위해 소프트웨어 스택을 구성해주는 도구 및 템플릿들의 집합임
> Yocto는 사용자가 쉽게 사용할 수 있게 추상화가 잘 되어있기 때문에, 분석 대상이 아니라 어떻게 잘 사용할 것인가에 초점을 맞추고 학습하자
> Yocto 프로젝트에는 다양한 프로젝트들이 존재하는데, 우리는 주로 Poky, bitbake, 오픈임베디드 코어를 다룸

## Yocto

- Yocto는 오픈 소스 프로젝트로 Yocto에서 개발되고 유지 관리되는 프로젝트들을 Yocto 프로젝트라고 함
- 개발자가 처음부터 광범위한 하드웨어 아키텍처 세트에 내장된 리눅스 배포판을 구축할 수 있게 하는 도구 및 프로세스 모음
- 다시, 커스텀 리눅스 배파를 위한 소프트웨어 스택(프로젝트 집합)을 구성해 주는 도구 및 템플릿들의 집합
- 서버나 워크스테이션이 아닌 임베디드 장치용 맞춤형 배포판 빌드에 초점
- 엄밀히 말하면 리눅스 빌드를 위해 Yocto를 사용하는 것이 아니라, OpenEmbedded 빌드 시스템이 리눅스 소프트웨어 프로젝트 집합을 빌드하는데 필요한 모든 정보를 제공하고, 이 정보를 바탕으로 OpenEmbedded 빌드 시스템에서 제공된 bitbake라는 빌드 도구가 빌드를 수행하는 것임

#### 역사

```
오픈임베디드 -> Pocky 리눅스 -> Yocto 프로젝트
```

- 모바일 장치를 위한 공통 빌드 시스템 및 코드를 기반으로 오픈임베디드 탄생
- 오픈임베디드에 기반을 둔 Pocky 리눅스 탄생
- Pocky 리눅스를 기반으로 Yocto 프로젝트 탄생

#### 추상화와 Yocto 프로젝트

- Yocto 프로젝트도 오픈임베디드 빌드 시스템이 내부적으로 어떻게 동작하는지 몰라도 일부 변수와 함수의 사용법만 알면 리눅스를 쉽게 빌드할 수 있음
- Yocto를 익힐 때, 처음부터 하나하나 다 볼 생각하면 시간이 너무 오래걸림. -> 툴을 다루는 방법 먼저 다루고 하나씩 볼 것!

#### Yocto와 앞으로의 학습 방법

- Yocto 프로젝트 내 여러 프로젝트 중 리눅스 빌드에 필요한 bitbake, OpenEmbedded Core, Poky에 대해 먼저 배운다
- 초반에 이해가 어렵더라도 끝까지 읽어볼 것! 반복하서 읽다보면 이해하는 시기가 찾아옴
- 문법은 간단하게 다루고, 추가 자세한 문법은 레퍼런스 매뉴얼 참조할 것

#### Poky 소스의 구성

```
- Yocto Project
  - 크로스 컴파일러, 라이브러리, 여러가지 툴등
  - Poky
    - bitbake
    - meta
      - OpenEmbedded Core
    - meta-pocky
    - meta-yocto-bsp
```

- Yocto 홈페이지에서 Poky를 다운로드 받으면 많은 `.bb` 파일이 보임
- `.bb` 파일들은 빌드를 위해 필요한 소스코드들을 가져오고, 빌드 환경 설정, 컴파일, 생성된 이미지를 설치하는 방법을 기술하고 있음
- 소스 빌드시 크로스컴파일러, 라이브러리, 여러가지 툴들이 필요한데, 이것들은 Yocto 안에 포함되어 있음
- 위를 지원해야하기 때문에 Yocto 프로젝트의 용량이 크고 이를 구동하려면 최소 50G 의 저장장치가 필요함
- `meta` 디렉토리 : 가장 중요한 역할

#### 개발 환경

```
- Virtual Box 내 Ubuntu 18.04 설치
- Yocto Project 사이트에서 Quick Build 에 들어가서 필요 설치 내용을 그대로 따라서 ubuntu에 설치함
- QEMU(가상머신)을 사용해 Target Board를 대체
-
```
