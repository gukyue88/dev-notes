---
layout: single
title: "[React] React Server Component"
categories: web/react
published: false
---

## RSC ë€?

- React Server Componentsì˜ ì¤„ì„ë§
- React 18ì—ì„œ ë„ì…ëœ ìƒˆë¡œìš´ ê°œë…
- Next.js 13ì˜ app ë¼ìš°í„°ë¥¼ í†µí•´ ì ê·¹ì ìœ¼ë¡œ í™œìš©ë˜ê³  ìˆìŒ
- React ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ë˜ì—ˆìœ¼ë‚˜, RSCëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ í˜‘ë ¥í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë Œë”ë§í•˜ëŠ” ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•¨.

## ì˜ë¬¸ì 

- RSCë‘ ê¸°ì¡´ì˜ SSR, SSGë‘ì€ ë‹¤ë¥¸ ê°œë…ì¸ê°€?
-

RSCëŠ” **React Server Components (ë¦¬ì•¡íŠ¸ ì„œë²„ ì»´í¬ë„ŒíŠ¸)**ì˜ ì¤„ì„ë§ì…ë‹ˆë‹¤. React 18ì—ì„œ ë„ì…ëœ ìƒˆë¡œìš´ ê°œë…ì´ë©°, Next.js 13ì˜ app ë¼ìš°í„°ë¥¼ í†µí•´ ì ê·¹ì ìœ¼ë¡œ í™œìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.
RSCëŠ” í•œë§ˆë””ë¡œ **"ì„œë²„ì—ì„œ ë Œë”ë§ë˜ëŠ” ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸"**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ React ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ì—ì„œ ë Œë”ë§ë˜ì—ˆì§€ë§Œ, RSCëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ í˜‘ë ¥í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë Œë”ë§í•˜ëŠ” ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•©ë‹ˆë‹¤.

## RSCì˜ í•µì‹¬ ê°œë…

- ë Œë”ë§ ìœ„ì¹˜ì˜ ë¶„ë¦¬:
  - ì„œë²„ ì»´í¬ë„ŒíŠ¸ (Server Component): ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ê³  ë Œë”ë§ë©ë‹ˆë‹¤. ìµœì¢… ê²°ê³¼ë¬¼ì€ HTML í˜•íƒœê°€ ì•„ë‹ˆë¼, íŠ¹ë³„íˆ ì§ë ¬í™”ëœ ë°ì´í„° í˜•ì‹(RSC Payload)ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡ë©ë‹ˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ ìì²´ì˜ JavaScript ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  - í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ (Client Component): ê¸°ì¡´ì˜ React ì»´í¬ë„ŒíŠ¸ì™€ ìœ ì‚¬í•˜ê²Œ ë¸Œë¼ìš°ì €(í´ë¼ì´ì–¸íŠ¸)ì—ì„œ ì‹¤í–‰ë˜ê³  ë Œë”ë§ë©ë‹ˆë‹¤. useState, useEffectì™€ ê°™ì€ React Hooksë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, window, documentì™€ ê°™ì€ ë¸Œë¼ìš°ì € APIì— ì ‘ê·¼í•˜ë©°, ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­, ì…ë ¥ ë“±)ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” íŒŒì¼ ìƒë‹¨ì— "use client" ì§€ì‹œì–´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤.
- ê¸°ë³¸ê°’ì€ Server Component:
  Next.js 13ì˜ app ë¼ìš°í„°ì—ì„œëŠ” ëª…ì‹œì ìœ¼ë¡œ "use client"ë¥¼ ì„ ì–¸í•˜ì§€ ì•ŠëŠ” í•œ, ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ Server Componentë¡œ ê°„ì£¼ë©ë‹ˆë‹¤. ì´ëŠ” ê°œë°œìê°€ ë³„ë‹¤ë¥¸ ì„¤ì • ì—†ì´ë„ Server Componentì˜ ì´ì ì„ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
- ë°ì´í„° í˜ì¹­ì˜ ë³€í™”:
  Server ComponentëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, ë°ì´í„°ë² ì´ìŠ¤ë‚˜ íŒŒì¼ ì‹œìŠ¤í…œê³¼ ê°™ì€ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì§ì ‘ ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” API ë¼ìš°íŠ¸ë¥¼ ë”°ë¡œ ë§Œë“¤ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ fetchí•˜ëŠ” ë°©ì‹ë³´ë‹¤ ë” íš¨ìœ¨ì ì´ê³  ì•ˆì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ë™ê¸° í•¨ìˆ˜ (async/await)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.
- ìŠ¤íŠ¸ë¦¬ë° ì§€ì›:
  RSCëŠ” ìŠ¤íŠ¸ë¦¬ë° ë Œë”ë§ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ëŠ” í˜ì´ì§€ì˜ ëª¨ë“  ë‚´ìš©ì´ ì¤€ë¹„ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , ì¤€ë¹„ë˜ëŠ” ëŒ€ë¡œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•˜ì—¬ ë” ë¹ ë¥¸ ì´ˆê¸° ë¡œë”©ê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
  RSCì˜ ì£¼ìš” ì¥ì 
- ì´ˆê¸° ë¡œë”© ì„±ëŠ¥ í–¥ìƒ (JavaScript ë²ˆë“¤ í¬ê¸° ê°ì†Œ): Server Componentì˜ JavaScript ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ìš´ë¡œë“œí•´ì•¼ í•˜ëŠ” JavaScript ë²ˆë“¤ í¬ê¸°ê°€ í¬ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤. ì´ëŠ” ì´ˆê¸° í˜ì´ì§€ ë¡œë”© ì†ë„ë¥¼ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
- ë³´ì•ˆ ê°•í™”: ë¯¼ê°í•œ ë°ì´í„° (API í‚¤, DB ì—°ê²° ì •ë³´ ë“±)ë‚˜ ì„œë²„ ì „ìš© ë¡œì§ì„ Server Componentì— ë‘ì–´ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë  ìœ„í—˜ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë°ì´í„° í˜ì¹­ íš¨ìœ¨ì„±: ì„œë²„ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ê°„ì˜ ì¶”ê°€ì ì¸ ë„¤íŠ¸ì›Œí¬ ì™•ë³µ(roundtrip) ì—†ì´ ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- SEO ê°œì„ : ì„œë²„ì—ì„œ ë¯¸ë¦¬ ë Œë”ë§ëœ HTMLì´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬ë˜ë¯€ë¡œ, ê²€ìƒ‰ ì—”ì§„ í¬ë¡¤ëŸ¬ê°€ ì›¹ í˜ì´ì§€ì˜ ì½˜í…ì¸ ë¥¼ ë” ì‰½ê²Œ ì¸ë±ì‹±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê°œë°œ ê²½í—˜ ê°œì„ : ë°ì´í„° í˜ì¹­ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ì™€ ê°€ê¹ê²Œ ë°°ì¹˜í•  ìˆ˜ ìˆì–´ ì½”ë“œì˜ ì‘ì§‘ë„ê°€ ë†’ì•„ì§€ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ì›Œì§‘ë‹ˆë‹¤.
  RSCì˜ ì‚¬ìš© ì˜ˆì‹œ (Next.js app ë¼ìš°í„° ê¸°ì¤€)
  // app/page.tsx (ê¸°ë³¸ì ìœ¼ë¡œ Server Component)
  import ProductList from '../components/ProductList'; // ì´ ë˜í•œ Server Componentì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŒ
  import AddToCartButton from '../components/AddToCartButton'; // ì´ ì»´í¬ë„ŒíŠ¸ëŠ” 'use client'ê°€ ìˆì„ ê²ƒì„

export default async function HomePage() {
// ì„œë²„ì—ì„œ ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ë˜ëŠ” API í˜¸ì¶œ
const products = await fetch('https://api.example.com/products').then(res => res.json());

return (

<div>
<h1>ìš°ë¦¬ ê°€ê²Œ ì¸ê¸° ìƒí’ˆ</h1>
<ProductList products={products} /> {/_ ì„œë²„ì—ì„œ ë Œë”ë§ëœ ìƒí’ˆ ëª©ë¡ _/}
<AddToCartButton productId="123" /> {/_ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë²„íŠ¼ _/}
</div>
);
}

// components/ProductList.tsx (Server Component)
// 'use client' ì§€ì‹œì–´ê°€ ì—†ìœ¼ë¯€ë¡œ Server Component
export default function ProductList({ products }) {
return (

<ul>
{products.map(product => (
<li key={product.id}>{product.name} - {product.price}ì›</li>
))}
</ul>
);
}

// components/AddToCartButton.tsx (Client Component)
'use client'; // ğŸ‘ˆ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì„ì„ ëª…ì‹œ

import { useState } from 'react';

export default function AddToCartButton({ productId }) {
const [quantity, setQuantity] = useState(1);

const handleAddToCart = () => {
// í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¥ë°”êµ¬ë‹ˆ ë¡œì§ ì²˜ë¦¬
console.log(`Add product ${productId} with quantity ${quantity} to cart.`);
};

return (

<div>
<input
type="number"
value={quantity}
onChange={(e) => setQuantity(Number(e.target.value))}
min="1"
/>
<button onClick={handleAddToCart}>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
</div>
);
}

ì´ì²˜ëŸ¼ RSCëŠ” Next.js ê°œë°œì— ìˆì–´ ë§¤ìš° ì¤‘ìš”í•œ ê°œë…ì´ë©°, í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•œ í•µì‹¬ ê¸°ìˆ ì…ë‹ˆë‹¤.
