---
layout: single
title: "[supabase] 관계형 데이터 베이스 기본 지식"
categories: web/supabase
---

jimm-blog.tistory.com/188 : 이거를 보고 좀 더 정리해보자

> 관계형 데이터 베이스 : 데이터를 테이블 형태로 관리하고, 테이블끼리의 관계를 통해 데이터를 관리하는 시스템

## 용어

#### Table, column, row

![table](https://media.geeksforgeeks.org/wp-content/uploads/20231221111931/Table-660.webp)

#### Key : 테이블에서 행 구별을 위한 유일한 값

![Key](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FF5M3E%2FbtstywCJ5Qw%2FAAAAAAAAAAAAAAAAAAAAAHdsBdVTNDoTxYofGdAd7r6-U0Ywt5wHayB9ykUCTnqS%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1751295599%26allow_ip%3D%26allow_referer%3D%26signature%3D%252BCpYZ8lUMFmKaF1Z4BHoMTReqLI%253D)

- Primary key : 기본키
- Foreign key : 외래키, 다른 테이블의 기본키를 현재 테이블의 키로 사용
- Composite key : 복합키, 두 개 이상의 열의 조합으로 만든 키

## 관계가 왜 중요한가?

관계를 설정하지 않고도, 데이터베이스를 이용할 수 있을 것 같은데, 왜 관계설정을 해주어야 하나?

> 결론 : 관계 설정 없이 기능 수행이 가능하지만, 관계형 데이터 베이스의 이점(데이터 관리, 일관성, 효율성)을 이용하지 못함.

1. 데이터간의 일관성 유지 : 예) 외래 키를 사용하여 유효하지 않은 참조를 방지
2. 데이터 중복 최소화 : 관계를 통해 데이터를 정규화하면 중복 데이터를 줄일 수 있음
3. 복잡한 쿼리 처리 : 여러 테이블에서 데이터를 쉽게 조합하여 복잡한 쿼리를 수행가능. 관계가 없으면 수동 연결 및 쿼리가 복잡해지고 비효율적일 수 있음
4. 유지보수 용이성 : 데이터 구조 변경이나 확장이 필요할 때, 관계를 통해 쉽게 조정할 수 있음
5. 성능 최적화 : 관계형 데이터 베이스는 인덱스를 활용하여 데이터를 효율적으로 검색할 수 있게 설계되어 있음. 관계가 없으면 최적화 활용이 어려움

## 데이터 정규화

코딩애플 : 데이터 정규화가 뭔지 설명해보세요 영상

> 결론 : 한 칸엔 하나의 데이터만, 현재 테이블의 주제와 관련 없는 것은 다른 테이블로 떼어내서 중복 데이터를 제거

#### 제 1 정규화 : 한 칸엔 하나의 데이터만

예) 수강 등록 테이블 (회원번호 / 프로그램)
101 / 헬스, 골프초급 => 101 / 헬스 + 101 / 골프초급

- 프로그램 안에 여러 데이터를 넣었을 때 단점
  - 프로그램이 골프초급인 것만 고르기 힘들다.
  - 프로그램명 수정도 어려움.

#### 제 2 정규화 : 현재 테이블의 주제와 관련 없는 컬럼을 다른 테이블로 떼어냄(composite primary key(합쳐서 primary key의 역할을 할 수 있는 것)에 종속된 애를 따로 떼어냄)

회원번호 / 프로그램 / 가격 테이블 => 회원정보 / 프로그램 테이블 + 프로그램 / 가격 테이블

- 테이블에 가격이 들어갔을 때 단점
  - 가격이 바뀌면 프로그램마다 가격을 다 수정해줘야함.

#### 제 3 정규화 : 일반 컬럼에만 종속된 컬럼을 따로 떼어냄

프로그램 / 가격 / 강사 / 출신대학 => 프로그램 / 가격 / 강사 + 강사 / 출신대학

## 인덱스

코딩애플 : index가 뭔지 설명해보세요 영상

- 데이터 검색시 2진 검색을 위해 정렬를 해놓은 컬럼 사본을 만드는데 이게 index 임.
- 실제 정렬은 tree형태로 구현되어있음. (B+ 트리형태로 많이 함.)
- 단점 : DB 용량 차지
- 빠른 검색이 필요한 column만 index로 만들어둠!
- primary key는 index로 이미 만들어져있음 (clusterd index)

## 설계

테이블 간의 관계

- 일 대 일 관계 : 예. 사용자 / 상세 프로필, 각 사용자가 하나의 상세 프로필을 가짐
- 일 대 다 관계 : 예. 손님 / 주문, 한 손님이 여러 주문을 가짐
- 다 대 다 관계 : 예. 학생 / 과목 테이블, 학생이 수강하는 과목, 과목을 수강하는 학생
