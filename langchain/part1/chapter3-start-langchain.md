# Chapter 3. Langchain 시작하기

## 1. LangChain 개요

- LangChain이란?
  - 대규모 언어 모델(LLMs)로 구동되는 애플리케이션을 개발하기 위한 프레임워크
  - 우리 서비스(앱)에 gpt를 사용할 수 있도록 체인으로 엮어주는 도움을 주는 아이 정도
- LangSmith
  - llm이 답변하는 과정을 세세하게 살펴보기 위해 트래킹에 사용
- LangGraph
  - 다중 협업 에이전트에 사용
- LangServe
  - 서비스를 호스팅할 때 사용

## 2. Jupyter Notbook 사용법 (단축키, 유용한팁)

#### 단축키

- ESC : 커맨드 모드로 진입 (커서가 깜빡이는것이 커서 모드)
  - 방향키 : 셀 이동
  - a : 위 쪽에 셀 추가 (above)
  - b : 아래 쪽에 셀 추가 (below)
  - dd : 삭제 (delete)
  - z : 실행 취소
  - m : 코드 셀 -> 마크다운 셀
  - y : 마크다운 셀 -> 코드 셀
- Shift + Enter : 실행

```
# !를 붙이면 명령어라는 의미임, 패키지 설치
!pip install <패키지명>
```

## 3. OpenAI 모델 알아보기

- Flagship model
  - GPT-4 Turbo : 가장 똑똑함 가장 비쌈
  - GPT-4o : 똑똑함, Turbo 가격의 1/2
  - GPT-3.5 Turbo : 그냥 그럼, GPT-4o 가격의 1/10
- DALL-E : 이미지 생성
- TTS : Text to Speech
- Whisper : Audio input을 text로 변경

## 4. 토큰(Token), 토큰계산기, 모델별 토큰 비용

#### 토큰

- 토큰 : 자연어 처리에서 텍스트를 작은 단위로 나우어 처리하기 위해 사용되는 기본 단위
  - 단어, 부분 단어, 문자 등이 토큰이 될 수 있음
  - LLM에서 토큰은 텍스트 데이터를 모델이 이해하고 처리하기 위해 분할된 기본 단위
- 토큰화 : 텍스트를 토큰으로 나누는 과정
- 토큰화 방법 : 문자 기반 토큰화, 단어 기반 토큰화, 서브워드 기반 토큰화
  - 서브워드 기반 토큰화를 주로 사용함. unhappiness -> un, happiness
- 토큰 사용량 == 돈
- 유저가 입력한 내용(input), assistant가 출력한 내용 (output) 모두 토큰으로 잡힘
- 모델마다 토큰 방법이 달라지고, 한글/영어에 따라서도 토큰 개수가 달라질 수 있음 (gpt-4o는 한글 토큰화 최적화를 많이 해놓음)

## 5. 모델의 입출력, Context Window 개념 이해

- 각 모델마다 context length가 조금씩 다름
- context length란? 입력과 출력을 처리할 수 있는 최대 토큰 길이
- 입력으로 들어가는 토큰 수는 넉넉하나, 출력으로 들어가는 토큰 수가 제한이 좀 더 되어있음
- context window == 내부에서 고정으로 사용되는 프롬프트 토큰 + 시스템 프로프트 + 유저 프롬프트 + 참고 문서 내용 + 대화 이력
- max_tokens == 답변 내용
- 입력과 출력의 비용이 다름
