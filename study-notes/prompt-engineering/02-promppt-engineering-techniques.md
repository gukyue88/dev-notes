# 프롬프트 엔지니어링 테크닉

## Zero-shot Prompting

- 오늘 날의 머신러닝은 대량의 데이터를 학습하고 튜닝을 통해 예제를 제공하지 않아도 작업을 수행함

## Few-shot Prompting

- LLM이 뛰어난 Zero-shot 기능을 보여주지만, 복잡한 작업에서는 여전히 개선이 필요함
- 프롬프트에서 데모를 제공하여 모델이 더 나은 성능을 발휘하도록 유도하는 문맥 내 학습을 가능하게 하는 기술
- 모델이 응답을 생성하기를 원하는 후속 예제에 대한 조건부 역할을 함
- 어려운 과제의 경우, shot(예제제를 더 늘려가며 실험해볼 수 있음

```
정말 멋지네요! // 긍정
이건 나쁘다! // 부정
와우 그 영화 정말 멋졌어요! // 긍정
정말 끔찍한 쇼였어! //
```

- Output : 부정

#### Few-shot의 한계

- 복잡한 추론 작업을 처리할 때, 한계가 있음
- 예) 집합 {15, 32, 5, 13, 82, 7, 1}에서 홀수를 모두 더하면 짝수이다. 등의 few-shot을 해도 적절한 답이 나오지 않음

## Chain-of-Thought

- 복잡한 산술, 상식, 상징적 추론 작업을 처리하기 위해 문제를 여러 단계로 나누고 이를 모델에 시연하는 방법

```
Q: 집합 {15, 32, 5, 13, 82, 7, 1}에서 홀수를 모두 더하면 짝수이다.
A: 홀수(15, 5, 13, 7, 1)을 모두 더하면 41이 돼. 정답은 거짓이야
```

- 위와 같이 문제를 단계별로 해결하는 예를 여러개 주고, 질문을 하면 잘 대답함

#### Zero-shot CoT Prompting

- CoT 문제를 줄 때, shot을 넣진 않지만, 마지막에 "단계별로 생각해보자(A: Let's think step by step)"를 넣으면 효과를 볼 수 있음.
- 프롬프트에 사용할 예시가 그리 많지 않을 경우 유용함

#### Automatic Chain-of-Thought

- Zero-shot CoT Prompting으로 CoT 예제를 자동으로 생성하고, 이를 Shot으로 넣어주는 방식

## Self-Consistency

- 자기 일관성
- Chain of Thought 에 사용되는 일반적인 탐욕 알고리즘 디코딩은 동일한 질문에도 여러 답변을 할 수 있음
- 해결방식
  - 동일한 질문에 대해 다양한 CoT를 반복 생성함(예. 40회 샘플링)
  - 다양성 확보 temperature를 보통 0.5~0.7 정도를 사용해 다양한 사고 경로를 탐색함
  - 다수결 : 각 CoT 경로에서 도출된 최종 답을 모아 가장 빈번하게 등장한 답을 최종 정답으로 채택함
- 복잡한 문제는 여러 경로를 통해 정답에 도달할 수 있다는 관찰에 기반함.

## Generate Knowledge Prompting

> 문제를 푸는 데 필요한 지식을 미리 떠올리고, 그 지식을 기반으로 추론을 하면 더 정확한 답을 도출할 수 있다.

- LLM이 자체적으로 생성한 지식을 프롬프트에 추가함으로서, 상식 추론 및 복잡한 과제 해결 능력을 향상시키는 기법
- 기존 한계
  - LLM이 사전 학습을 통해 방대한 지식을 내재화 하지만, 추론과정에서 이 지식을 온전히 활용하지 못하는 경우가 많음
  - 특히, 상싟 기반 추론이나 다단계 추론 과제에서, 모델이 관련된 지식을 떠올리지 못하거나 잘못된 가정을 기반으로 추론을 진행할 수 있음
- 해결 방식
  - 지식 생성 : LLM에게 주어진 질문에 대해 관련된 지식을 생성하도록 프롬프트
  - 지식 통합 : 생성된 지식을 본 질문의 프롬프트에 추가하여 최종 추론을 유도

```
다음 질문과 관련된 중요한 사실이나 배경 지식을 3~5개 생성하세요.
Q: 한국의 겨울철에 난방비가 급격히 오르는 이유는 무엇인가요?
```

```
지식:
{위에서 나온 llm의 답변}

짊문: 한국의 겨울철에 난방비가 급격히 오르는 이유는 무엇인가요?
지침: 위 지식을 기반으로 추론하세요. "Let's think step by step" 방식을 사용하세요.
```

## Prompt Chaining

> 하나의 복잡한 프롬프트를 여러 개의 작고 명확한 단계로 나누어 처리하자

- 예) 뉴스 기사 작성 프롬프트 => 분야 요약 프롬프트 + 최신 발견 설명 프롬프트 + 사회적 영향 분석 프롬프트 + 종합 프롬프트
- 대화형 어시스턴트에서 특히 유용함

## Tree of Thoughts

- 탐구나 전략적인 예측이 필요한 복잡한 작업들을 해결하기 위해서는 기존의 단순한 프롬프팅 기법은 부족함
- Chain-of-Thought 기법을 일반화하여, 일반적인 문제 해결을 위한 중간 단계 역할을 하는 생각에 대한 탐색을 촉진함(?)
